{% extends "base.html" %}

{% block content %}

<ul>
  <li><a href="{% url 'experiment' pop.experiment.pk %}">Experiment {{ pop.experiment.rel_index }}</a></li>
</ul>

<form id="generation-form" action="" method="post">
  {% csrf_token %}
  <select id="generation-sel">
  {% for gen in gen_list %}
    <option value="{{ gen.pk }}">Generation {{ gen.rel_index }}</option>
  {% endfor %}
  </select>
  <input type="submit" value="Select" />
</form>

{% if pop.winners %}
  A winner was found.
{% else %}
  No winner was found.
{% endif %}

<div id="gen-graph"></div>

<div id="spec-graph"></div>

<script type="text/javascript">
  var xdata = [];
  var ydata = [];

{% for gen in gen_fitness %}
  xdata.push({{ gen.generation }});
  ydata.push({{ gen.sfitness }});
{% endfor %}

  var data = [
    {
      x: xdata,
      y: ydata,
      type: 'bar',
    }
  ];

  Plotly.newPlot('gen-graph', data);

  var xdata = [];
  var ydata = [];

{% for spec in spec_fitness %}
  xdata.push({{ spec.species }});
  ydata.push({{ spec.sfitness }});
{% endfor %}

  var data = [
    {
      x: xdata,
      y: ydata,
      type: 'bar',
    }
  ];

  Plotly.newPlot('spec-graph', data);
</script>

{% endblock %}
