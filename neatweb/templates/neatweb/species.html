{% extends "base.html" %}

{% block content %}

<ul>
  <li><a href="{% url 'population' spec.population.pk %}">Population {{ spec.population.rel_index }}</a></li>
  <li><a href="{% url 'generation' spec.generation.pk %}">Generation {{ spec.generation.rel_index }}</a></li>
</ul>
<form id="organism-form" action="" method="post">
  {% csrf_token %}
  <select id="organism-sel">
  {% for org in org_list %}
    <option value="{{ org.pk }}">Organism {{ org.rel_index }}</option>
  {% endfor %}
  </select>
  <input type="submit" value="Select" />
</form>

<table border="1">
{% for k, v in fields.items %}
  <tr>
    <td>{{ k }}</td>
    <td>{{ v }}</td>
  </tr>
{% endfor %}
</table>

<div id="org-graph"></div>

<div id="gen-graph"></div>

<script type="text/javascript">
  var xdata = [];
  var ydata = [];

{% for org in org_fitness %}
  xdata.push({{ org.rel_index }});
  ydata.push({{ org.fitness }});
{% endfor %}

  var data = [
    {
      x: xdata,
      y: ydata,
      type: 'bar',
    }
  ];

  Plotly.newPlot('org-graph', data);

  var xdata = [];
  var ydata = [];

{% for gen in gen_fitness %}
  xdata.push({{ gen.generation }});
  ydata.push({{ gen.avg_fitness }});
{% endfor %}

  var data = [
    {
      x: xdata,
      y: ydata,
      type: 'bar',
    }
  ];

  Plotly.newPlot('gen-graph', data);
</script>

{% endblock %}
